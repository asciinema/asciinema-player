!function(a){var b=React.DOM,c=React.createClass({displayName:"PlayButton",render:function(){var a;return a=this.props.playing?asciinema.PauseIcon():asciinema.PlayIcon(),b.span({className:"playback-button",onClick:this.handleClick},a)},handleClick:function(a){a.preventDefault(),this.props.playing?this.props.onPauseClick():this.props.onResumeClick()}}),d=React.createClass({displayName:"FullscreenToggleButton",render:function(){var a;return a=this.props.fullscreen?asciinema.ShrinkIcon():asciinema.ExpandIcon(),b.span({className:"fullscreen-button",onClick:this.handleClick},a)},handleClick:function(a){a.preventDefault(),this.props.onClick()}});a.ControlBar=React.createClass({displayName:"ControlBar",render:function(){return b.div({className:"control-bar"},c({playing:this.props.playing,onPauseClick:this.props.onPauseClick,onResumeClick:this.props.onResumeClick}),asciinema.Timer({currentTime:this.props.currentTime,totalTime:this.props.totalTime}),d({fullscreen:this.props.fullscreen,onClick:this.props.toggleFullscreen}),asciinema.ProgressBar({value:this.props.currentTime/this.props.totalTime,onClick:this.handleSeek}))},handleSeek:function(a){this.props.onSeekClick(a*this.props.totalTime)},shouldComponentUpdate:function(a){return a.playing!=this.props.playing||a.currentTime!=this.props.currentTime||a.totalTime!=this.props.totalTime||a.fullscreen!=this.props.fullscreen}})}(window.asciinema=window.asciinema||{}),function(a){var b=React.DOM;a.Cursor=React.createClass({displayName:"Cursor",render:function(){return b.span({className:this.className()},this.props.char)},className:function(){return this.props.inverse?"cursor fg-"+this.props.fg+" bg-"+this.props.bg:"cursor fg-"+this.props.bg+" bg-"+this.props.fg}})}(window.asciinema=window.asciinema||{}),function(a){function b(){this.n=0,this.direction=1}b.prototype.start=function(a){setInterval(function(){this.generateFrame(a)}.bind(this),100)},b.prototype.generateFrame=function(a){var b={};b[this.n]=[[(new Date).toString(),{}]],a({lines:b}),this.n+=this.direction,(this.n<0||this.n>=10)&&(this.direction*=-1)},b.prototype.pause=function(){return!1},b.prototype.resume=function(){return!1},b.prototype.seek=function(){return!1},a.FunnyMovie=b}(window.asciinema=window.asciinema||{}),function(a){function b(a,b){this.url=a,this.speed=b||1}b.prototype.start=function(a,b,c){var d;return this.data?d=this.createController(a,b):this.fetchData(c,function(){d=this.createController(a,b)}.bind(this)),{time:function(){return d&&d.time?d.time():void 0},pause:function(){return d&&d.pause?d.pause():void 0},resume:function(){return d&&d.resume?d.resume():void 0},seek:function(a){return d&&d.seek?d.seek(a):void 0}}},b.prototype.fetchData=function(a,b){a(!0);var c=$.ajax({url:this.url,dataType:"json"});c.done(function(c){a(!1),this.data=c,b()}.bind(this)),c.fail(function(b,c){a(!1),console.error(this.url,c)})},b.prototype.createController=function(a,b){return arraySource=new asciinema.NavigableArraySource(this.data,this.speed),arraySource.start(a,b)},a.HttpArraySource=b}(window.asciinema=window.asciinema||{}),function(a){var b=React.DOM;a.PlayIcon=React.createClass({displayName:"PlayIcon",render:function(){return b.svg({version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12",className:"icon"},b.path({d:"M1,0 L11,6 L1,12 Z"}))}}),a.PauseIcon=React.createClass({displayName:"PauseIcon",render:function(){return b.svg({version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12",className:"icon"},b.path({d:"M1,0 L4,0 L4,12 L1,12 Z"}),b.path({d:"M8,0 L11,0 L11,12 L8,12 Z"}))}}),a.ExpandIcon=React.createClass({displayName:"ExpandIcon",render:function(){return b.svg({version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12",className:"icon"},b.path({d:"M0,0 L5,0 L3,2 L5,4 L4,5 L2,3 L0,5 Z"}),b.path({d:"M12,12 L12,7 L10,9 L8,7 L7,8 L9,10 L7,12 Z"}))}}),a.ShrinkIcon=React.createClass({displayName:"ShrinkIcon",render:function(){return b.svg({version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12",className:"icon"},b.path({d:"M5,5 L5,0 L3,2 L1,0 L0,1 L2,3 L0,5 Z"}),b.path({d:"M7,7 L12,7 L10,9 L12,11 L11,12 L9,10 L7,12 Z"}))}})}(window.asciinema=window.asciinema||{}),function(a){var b=React.DOM;a.Line=React.createClass({displayName:"Line",render:function(){var a=0,c=this.props.cursorX,d=this.props.parts.map(function(b){var d={};for(key in b[1])d[key]=b[1][key];var e={text:b[0],attrs:d},f=b[0].length;return null!==c&&c>=a&&a+f>c&&(e.cursorX=c-a,e.cursorInverted=this.props.cursorInverted,d.inverse?delete d.inverse:d.inverse=!0),a+=f,asciinema.Part(e)}.bind(this));return b.span({className:"line"},d)}})}(window.asciinema=window.asciinema||{}),function(a){function b(a,b,c,d,e){this.width=a,this.height=b,this.source=c,this.snapshot=d,this.totalTime=e}b.prototype.start=function(a,b,c,d){function e(){clearInterval(f),b()}var f,g=this.source.start(a,e,d);return f=setInterval(function(){c(g.time())},300),g},a.Movie=b}(window.asciinema=window.asciinema||{}),function(a){function b(){return(new Date).getTime()/1e3}function c(a,b,c,d){function e(){var b=a[i];b&&(c(b[0],b[1]),i+=1,f())}function f(){var c=a[i];c?h=setTimeout(e,1e3*a[i][0]/b):(d(),window.console&&window.console.log("finished in "+((new Date).getTime()-j.getTime())))}function g(){clearTimeout(h)}var h,i=0,j=new Date;return f(),g}function d(a,b){this.frames=a,this.speed=b||1}d.prototype.start=function(a,d){var e,f,g,h=0,i=!1,j=!1,k=function(e){return h=e,c(this.framesFrom(e),this.speed,function(c,d){f=b(),h+=c,a(d)},function(){j=!0,d()})}.bind(this),l=function(){return(b()-f)*this.speed}.bind(this);return g=k(0),{pause:function(){return j?!1:(i=!0,g(),e=l(),!0)}.bind(this),resume:function(){return j?!1:(i=!1,g=k(h+e),!0)}.bind(this),seek:function(a){return j?!1:(i=!1,g(),g=k(a),!0)}.bind(this),time:function(){return j?h:i?h+e:h+l()}.bind(this)}},d.prototype.framesFrom=function(a){for(var b=0,c=0,d={};c+this.frames[b][0]<a;){var e=this.frames[b];c+=e[0],asciinema.mergeChanges(d,e[1]),b+=1}var f=[[0,d]],g=this.frames[b],h=g[0]-(a-c);return f=f.concat([[h,g[1]]]),f=f.concat(this.frames.slice(b+1))},a.NavigableArraySource=d}(window.asciinema=window.asciinema||{}),function(a){var b=React.DOM;a.LoadingOverlay=React.createClass({displayName:"LoadingOverlay",render:function(){return b.div({className:"loading"},b.div({className:"loader"}))}}),a.StartOverlay=React.createClass({displayName:"StartOverlay",render:function(){return b.div({className:"start-prompt",onClick:this.onClick},b.div({className:"play-button"},b.div(null,b.span(null,asciinema.PlayIcon()))))},onClick:function(a){a.preventDefault(),this.props.start()}})}(window.asciinema=window.asciinema||{}),function(a){var b=React.DOM;a.Part=React.createClass({displayName:"Part",render:function(){return b.span({className:this.className()},this.children())},children:function(){var a=this.props.text,b=this.props.cursorX;if(void 0!==b){var c=[];b>0&&(c=c.concat([a.slice(0,b)]));var d=asciinema.Cursor({fg:this.fgColor()||"fg",bg:this.bgColor()||"bg","char":a[b],inverse:this.props.cursorInverted});return c=c.concat([d]),b+1<a.length&&(c=c.concat([a.slice(b+1)])),c}return this.props.text},fgColor:function(){var a=this.props.attrs.fg;return this.props.attrs.bold&&void 0!==a&&8>a&&(a+=8),a},bgColor:function(){var a=this.props.attrs.bg;return this.props.attrs.blink&&void 0!==a&&8>a&&(a+=8),a},className:function(){var a=[],b=this.props.attrs,c=this.fgColor(),d=this.bgColor();if(b.inverse){var e,f;e=void 0!==d?"fg-"+d:"fg-bg",f=void 0!==c?"bg-"+c:"bg-fg",a=a.concat([e,f])}else void 0!==c&&(a=a.concat(["fg-"+c])),void 0!==d&&(a=a.concat(["bg-"+d]));return b.bold&&(a=a.concat(["bright"])),b.underline&&(a=a.concat(["underline"])),a.join(" ")}})}(window.asciinema=window.asciinema||{}),function(a){var b=React.DOM;a.Player=React.createClass({displayName:"Player",getInitialState:function(){var a=this.props.movie.snapshot||[],b={x:0,y:0,visible:!1},c=this.props.fontSize||"small";return{lines:a,cursor:b,fontSize:c,fullscreen:!1,loading:!1,state:"not-started",currentTime:0,totalTime:this.props.movie.totalTime}},componentWillMount:function(){this.props.autoPlay&&this.start()},componentDidMount:function(){screenfull.enabled&&document.addEventListener(screenfull.raw.fullscreenchange,function(){this.setState({fullscreen:screenfull.isFullscreen})}.bind(this)),window.addEventListener("resize",function(){this.setState({windowHeight:window.innerHeight,playerHeight:this.refs.player.getDOMNode().offsetHeight})}.bind(this),!0),requestAnimationFrame(this.applyChanges)},render:function(){var a;return this.state.loading?a=asciinema.LoadingOverlay():!this.props.autoPlay&&this.isNotStarted()&&(a=asciinema.StartOverlay({start:this.start})),b.div({className:"asciinema-player-wrapper"},b.div({ref:"player",className:this.playerClassName(),style:this.playerStyle()},asciinema.Terminal({width:this.props.movie.width,height:this.props.movie.height,fontSize:this.fontSize(),lines:this.state.lines,cursor:this.state.cursor,cursorBlinking:this.isPlaying()}),asciinema.ControlBar({playing:this.isPlaying(),onPauseClick:this.pause,onResumeClick:this.resume,onSeekClick:this.seek,currentTime:this.state.currentTime,totalTime:this.state.totalTime,fullscreen:this.state.fullscreen,toggleFullscreen:this.toggleFullscreen}),a))},playerClassName:function(){return"asciinema-player "+this.themeClassName()},themeClassName:function(){return"asciinema-theme-"+(this.props.theme||"default")},fontSize:function(){return this.state.fullscreen?"small":this.state.fontSize},playerStyle:function(){if(this.state.fullscreen&&this.state.windowHeight&&this.state.playerHeight){var a=this.state.windowHeight-this.state.playerHeight;if(a>0)return{marginTop:a/2+"px"}}return{}},setLoading:function(a){this.setState({loading:a})},start:function(){this.setState({state:"playing"}),this.movieController=this.props.movie.start(this.onFrame,this.onFinish,this.setTime,this.setLoading)},onFinish:function(){this.setState({state:"finished"})},setTime:function(a){this.setState({currentTime:a})},pause:function(){this.movieController.pause&&this.movieController.pause()&&this.setState({state:"paused"})},resume:function(){this.isFinished()?this.start():this.movieController.resume&&this.movieController.resume()&&this.setState({state:"playing"})},seek:function(a){this.movieController.seek&&this.movieController.seek(a)&&this.setState({state:"playing",currentTime:a})},toggleFullscreen:function(){screenfull.enabled&&screenfull.toggle(this.getDOMNode())},onFrame:function(a){this.changes=this.changes||{},asciinema.mergeChanges(this.changes,a)},applyChanges:function(){requestAnimationFrame(this.applyChanges);var a=this.changes||{},b={};if(a.lines){var c=[];for(var d in this.state.lines)c[d]=this.state.lines[d];for(var d in a.lines)c[d]=a.lines[d];b.lines=c}if(a.cursor){var e={x:this.state.cursor.x,y:this.state.cursor.y,visible:this.state.cursor.visible};for(var f in a.cursor)e[f]=a.cursor[f];b.cursor=e}this.setState(b),this.changes={}},isNotStarted:function(){return"not-started"===this.state.state},isPlaying:function(){return"playing"===this.state.state},isFinished:function(){return"finished"===this.state.state}}),a.mergeChanges=function(a,b){if(b.lines){a.lines=a.lines||{};for(var c in b.lines)a.lines[c]=b.lines[c]}if(b.cursor){a.cursor=a.cursor||{};for(var d in b.cursor)a.cursor[d]=b.cursor[d]}}}(window.asciinema=window.asciinema||{}),function(a){var b=React.DOM;a.ProgressBar=React.createClass({displayName:"ProgressBar",render:function(){var a=100*this.props.value;return b.span({className:"progressbar"},b.span({className:"bar",ref:"bar",onMouseDown:this.handleClick},b.span({className:"gutter"},b.span({style:{width:a+"%"}}))))},handleClick:function(a){a.preventDefault();var b=a.target||a.srcElement,c=b.currentStyle||window.getComputedStyle(b,null),d=parseInt(c.borderLeftWidth,10),e=parseInt(c.borderTopWidth,10),f=b.getBoundingClientRect(),g=a.clientX-d-f.left,h=(a.clientY-e-f.top,this.refs.bar.getDOMNode().offsetWidth);this.props.onClick(g/h)}})}(window.asciinema=window.asciinema||{}),function(a){var b=React.DOM;a.Terminal=React.createClass({displayName:"Terminal",getInitialState:function(){return{cursorInverted:!1}},render:function(){var a=this.props.cursor,c=this.props.lines.map(function(b,c){return asciinema.Line(a.visible&&a.y==c?{parts:b,cursorX:a.x,cursorInverted:this.props.cursorBlinking&&this.state.cursorInverted}:{parts:b})}.bind(this));return b.pre({className:this.className(),style:this.style()},c)},className:function(){return"terminal "+this.fontClassName()},fontClassName:function(){return"font-"+this.props.fontSize},style:function(){if(this.state.charDimensions){var a=this.state.charDimensions[this.props.fontSize],b=this.props.width*a.width+"px",c=this.props.height*a.height+"px";return{width:b,height:c}}return{}},componentDidMount:function(){this.calculateCharDimensions(),this.startBlinking()},componentDidUpdate:function(a){(a.lines!=this.props.lines||a.cursor!=this.props.cursor)&&this.restartBlinking()},componentWillUnmount:function(){this.stopBlinking()},shouldComponentUpdate:function(a,b){return a.lines!=this.props.lines||a.cursor!=this.props.cursor||a.fontSize!=this.props.fontSize||b.cursorInverted!=this.state.cursorInverted||b.charDimensions!=this.state.charDimensions},calculateCharDimensions:function(){var a=$('<span class="font-sample"><span class="line"><span class="char">M</span></span></span>');this.getDOMNode().appendChild(a[0]);var b=a.find(".char"),c={};a.addClass("font-small"),c.small={width:b.width(),height:a.height()},a.removeClass("font-small"),a.addClass("font-medium"),c.medium={width:b.width(),height:a.height()},a.removeClass("font-medium"),a.addClass("font-big"),c.big={width:b.width(),height:a.height()},a.remove(),this.setState({charDimensions:c})},startBlinking:function(){this.cursorBlinkInvervalId=setInterval(this.flip,500)},stopBlinking:function(){clearInterval(this.cursorBlinkInvervalId)},restartBlinking:function(){this.stopBlinking(),this.reset(),this.startBlinking()},reset:function(){this.setState({cursorInverted:!1})},flip:function(){this.setState({cursorInverted:!this.state.cursorInverted})}})}("undefined"==typeof exports?this.asciinema=this.asciinema||{}:exports),function(a){var b=React.DOM;a.Timer=React.createClass({displayName:"Timer",render:function(){return b.span({className:"timer"},b.span({className:"time-elapsed"},this.elapsedTime()),b.span({className:"time-remaining"},this.remainingTime()))},remainingTime:function(){var a=this.props.totalTime-this.props.currentTime;return"-"+this.formatTime(a)},elapsedTime:function(){return this.formatTime(this.props.currentTime)},formatTime:function(a){return 0>a&&(a=0),""+this.minutes(a)+":"+this.seconds(a)},minutes:function(a){var b=Math.floor(a/60);return this.pad2(b)},seconds:function(a){var b=Math.floor(a%60);return this.pad2(b)},pad2:function(a){return 10>a?"0"+a:a}})}(window.asciinema=window.asciinema||{});